package com.projeto;

import com.bringto.selenium.TelaHelper;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;

import java.util.ArrayList;
import java.util.List;

public class Automacao {
    
    public static void main(String[] args) {

        try {
            TelaHelper.navegar("https://the-internet.herokuapp.com/login");
            TelaHelper.maximizar();

            TelaHelper.esperarVisibilidade(By.xpath("//div/h4"), 15);

            List<WebElement> letras = TelaHelper.encontrarElementos(By.xpath("//h4/em"));
            List<String> texto = new ArrayList<>();
            for (WebElement elemento : letras) {
                texto.add(elemento.getText());
            }

            String login = texto.get(0);
            String senha = texto.get(1);

            System.out.println("Usuário: " + login);
            System.out.println("Senha: " + senha);

            TelaHelper.preencherCampo(By.xpath("//input[@id='username']"), login, 15);
            TelaHelper.preencherCampo(By.xpath("//input[@id='password']"), senha, 15);

            TelaHelper.clicar(By.xpath("//button[@type='submit']"), 15);

            WebElement confirmar = TelaHelper.esperarVisibilidade(By.xpath("//div[@id='flash']"), 15);
            String confirmacao = confirmar.getText();

            if (confirmacao.contains("You logged into a secure area!")) {
                System.out.println("You logged into a secure area!");
            } else if (confirmacao.contains("Your username is invalid!")) {
                System.out.println("Your username is invalid!");
            } else if (confirmacao.contains("Your password is invalid!")) {
                System.out.println("Your password is invalid!");
            } else {
                System.out.println("⚠️ Cenário inesperado, mensagem: " + confirmacao);
            }

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            TelaHelper.finalizar();
        }
    }
}
